# Node.js Back-end Refactoring Project

## 개요
### 프로젝트 명 - Node.js 백엔드 리펙토링 프로젝트

### 배경
#### 이전 현장 실습 프로젝트에서 진행 되었던 Hoonsletter Project의 Back-end를 Node.js로 구현을 했습니다. <br /> 하지만 이는 기초적인 Back-end 지식 없이 구현을 하게 되어 구현 이상을 바라보는 코드를 생각하지 못했습니다. <br />따라서 현재 Node.js로 구현된 백엔드 시스템은 여러 문제점이 있습니다.
- **코드 구조의 일관성 부족**: 코드 구조가 일관성이 없고 각 모듈의 목적이 명확하지 않아 가독성이 떨어지고 유지 보수가 불가능한 수준입니다.
- **계층 디렉터리 설계**: 백엔드 설계시 계층(Layer)에 따른 디렉터리 구조를 설계하지 못해 확장성에 제한이 있습니다. 
- **요구사항 정의 부족**: 요구사항을 완벽히 정의하지 못했습니다. 따라서 RESTful API를 완벽하게 설계하고 구현하지 못해 기능성에 제한이 있습니다.  
- **데이터베이스 설계 부족**: 데이터베이스 스키마를 확실히 설계하지 못해 팀원과의 협업 도중 추가적으로 데이터를 조정(Mapping)하는 과정이 발생했습니다.

### 개선 방향
#### 기존 프로젝트의 문제점에서 개선해야 할 여러 부분들이 있습니다.
- **구조화된 코드 구현**: Spring Boot로 리팩토링하여 일관성 있는 코드 구조를 구현하고, 각 모듈의 목적을 명확히 합니다.
- **계층화된 디렉터리 구조 설계**: 기능, 역할에 따라서 이를 계층(Layer)으로 나눈 디렉터리 구조를 설계하여 확장성과 모듈간의 독립성을 최대한 확보합니다.
- **명확한 요구사항 정의**: 요구사항을 명확히 정의하고, 이를 기반으로 RESTful API를 구현해서 완전성(Completeness)을 확보 합니다. 또한 각 요구사항 수행에 관한 일관성(Consistentcy)을 확보하기 위해 테스트 케이스를 생성합니다. 이로써 테스트 가능성(Testability)도 확보 합니다.   
- **데이터베이스 스키마 재설계**: 데이터베이스 스키마를 재설계하여 프론트엔드와 협업 시 데이터 매핑이나 구조 변경 과정을 최소화 할 수 있도록 설계를 합니다.


# 요구사항 정의
- 본 프로젝트에서 요구되는 기능적 요구사항을 정리하고 이를 [유스케이스 다이어그램](document/use-case-hoonsletter.drawio.svg)으로 디자인 해보았습니다.

## 비회원 요구사항 

[1. **로그인**](#1-로그인)  
- 사용자의 아이디(username)와 비밀번호(password)를 입력하거나 카카오 인증을 통해 로그인을 할 수 있습니다.
   
[2. **회원가입**](#3-회원가입)
- 사용자의 정보를 입력해서 회원 가입을 하거나 카카오 인증을 통해 회원 가입을 할 수 있습니다.
   
[3. **편지 보기**](#6-편지-보기)
- 다른 사용자가 제작한 편지를 볼 수 있습니다.

[4. **편지 조회**](#4-전체-편지-조회)
   - 다른 사용자가 제작한 편지를 조회할 수 있습니다.
 
   [4.1 **편지 검색**](#5-편지-검색)
    - 사용자는 제작한 편지들을 사용자의 요구에 맞게 검색을 할 수 있습니다.
   
   [4.2 **편지 정렬**](#4-전체-편지-조회)
    - 사용자는 제작한 편지들을 사용자의 요구에 맞게 정렬을 할 수 있습니다.

## 회원 요구사항

[1. **로그아웃**](#2-로그아웃)
- 사용자는 로그아웃을 할 수 있습니다.

[2. **편지 제작**](#7-편지-생성)
- 사용자는 원하는 템플릿을 선택하여 편지를 제작할 수 있습니다.

[3. **편지 수정**](#8-편지-수정)
 - 사용자는 제작한 편지를 수정할 수 있습니다.
 - 제작한 편지는 제작 후 **3일** 까지만 수정이 가능하고 그 이후는 불가능 합니다.

[4. **편지 삭제**](#9-편지-삭제)
- 사용자는 제작한 편지를 삭제할 수 있습니다.

[5. **편지 공유**](#10-편지-공유)
- 사용자는 제작한 편지를 링크를 통해 공유할 수 있습니다.

[6. **편지 보기**](#6-편지-보기)
- 사용자는 다른 사용자가 제작한 편지를 볼 수 있습니다.

[7. **편지 조회**](#4-전체-편지-조회)
- 사용자는 다른 사용자가 제작한 편지를 조회할 수 있습니다.

   [7.1 **편지 검색**](#4-전체-편지-조회)
   - 사용자는 제작한 편지들을 사용자의 요구에 맞게 검색할 수 있습니다.

   [7.2 **편지 정렬**](#4-전체-편지-조회)
   - 사용자는 제작한 편지들을 사용자의 요구에 맞게 정렬할 수 있습니다.

# API 스펙
- 요구사항을 토대로 필요한 기능을 도출해서 이를 API로써 정의를 해보았습니다.

#### **1. 로그인**
- HTTP Request: `POST` /api/user/login
- 입력 데이터: 아이디, 패스워드
- 응답 데이터: X

#### **2. 로그아웃**
- HTTP Request: `POST` /api/user/logout
- 입력 데이터: X
- 응답 데이터: X
     
#### **3. 회원가입**
- HTTP Request: `POST` /api/user/signup
- 입력 데이터: 아이디, 비밀번호, 이메일, 닉네임, 프로필사진
- 응답 데이터: X

#### **4. 전체 편지 조회**
- HTTP Request: `GET` /api/letters
- 입력 데이터: X
- 응답 데이터: 전체 편지 데이터
- 쿼리 스트링:
   - `sort_by` : 정렬 기준 (작성자, 작성일)
   - `direction` : 정렬 순서(asc 또는 desc)
   - `page` : 페이지 번호
   - `search_param`: 검색어

#### **5. 편지 보기**
- HTTP Request: `GET` /api/letters/{id}
- 입력 데이터: X
- 응답 데이터: 편지 데이터

#### **6. 편지 생성**
- HTTP Request: `POST` /api/letters/{id}
- 입력 데이터: 편지 데이터
- 응답 데이터: X

#### **7. 편지 수정**
- HTTP Request: `PUT` /api/letters/{id}
- 입력 데이터: 편지 데이터
- 응답 데이터: X

#### **9. 편지 삭제**
- HTTP Request: `DELETE` /api/letters/{id}
- 입력 데이터: X
- 응답 데이터: X

#### **10. 편지 공유**
- HTTP Request: `POST` /api/letters/share/{id}
- 입력 데이터: X
- 응답 데이터: X

